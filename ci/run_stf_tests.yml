---
- hosts: all
  name: "Create zuul-output log dir"
  gather_facts: false
  tasks:
    - name: "Create log dir"
      ansible.builtin.file:
        path: "{{ ansible_user_dir }}/zuul-output/logs"
        state: directory
        mode: "0755"
        
- name: "Run the stf_functional_tests playbook"
  ansible.builtin.import_playbook: ../stf_functional_tests.yml

- hosts: all
  name: "Copy logs"
  gather_facts: false
  tasks:
    - name: "Copy generated logs"
      ansible.builtin.shell: |
        cp "/var/log/ansible/hosts/*" "{{ ansible_user_dir }}/zuul-output/logs"
  

